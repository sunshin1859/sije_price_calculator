<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SIJE 구독료 계산기</title>
  <style>
    body {
      font-family: sans-serif;
      max-width: 1200px;
      margin: 20px auto;
      padding: 20px;
      display: flex;
      gap: 40px;
      border: 1px solid #ccc;
    }
    .form-section {
      flex: 1;
    }
    .result {
      flex: 1;
      background: #f9f9f9;
      padding: 10px;
      border: 1px solid #ddd;
      height: fit-content;
    }
    label { display: block; margin-top: 10px; }
    input[type="text"], input[type="number"], select { width: 100%; padding: 4px; margin-top: 4px; }
    .checkbox-group, .radio-group { margin-top: 8px; }
    .checkbox-group label, .radio-group label { margin-right: 10px; }
    .saved-list { margin-top: 10px; font-size: 0.9em; }
    table { width: 100%; border-collapse: collapse; margin-top: 10px; }
    th, td { border: 1px solid #ddd; padding: 8px; text-align: center; }
    th { background-color: #f0f0f0; }
    .compare-table { margin-top: 20px; }
  </style>
</head>
<body>
  <div class="form-section">
    <h1>SIJE 구독료 계산기</h1>

    <label>회사명
      <input type="text" id="companyName" placeholder="회사명을 입력하세요">
    </label>
    <label>회사 구분
      <select id="companyType" onchange="applyTypePreset()">
        <option value="">선택</option>
        <option value="production">생산 중심</option>
        <option value="sourcing">소싱 중심</option>
        <option value="data">데이터 중심</option>
      </select>
    </label>
    <label>공장 수
      <input type="number" id="factories" value="0">
    </label>
    <label>재봉틀 수
      <input type="number" id="machines" value="0">
    </label>
    <label>사용자 수 (Monolis)
      <input type="number" id="users" value="0">
    </label>

    <label>도입 스케줄 설명
      <input type="text" id="scheduleDescription" placeholder="예: Monolog부터 시작, 1년 후 MoAI 도입...">
    </label>

    <button onclick="simulateAllStages()">3단계 자동 시뮬레이션</button>

    <div class="saved-list" id="savedList"></div>
  </div>

  <div class="result" id="result"></div>

  <script>
    function calculate(stage, monolog, moai, monolis, machines, users) {
      const rate = stage === 'expand' ? 0.2 : (stage === 'standardize' ? 0.7 : 0);
      const monologUnits = (machines * rate) / 120;
      const monologFee = monolog ? monologUnits * 1100 : 0;
      const moaiFee = (moai && monolog) ? monologFee * 2 : 0;
      const monolisFee = monolis ? users * 40 : 0;
      const totalFee = monologFee + moaiFee + monolisFee;
      const stageLabel = stage === 'acquire' ? 'Acquire' : (stage === 'expand' ? 'Expand' : 'Standardize');
      const timeline = stage === 'acquire' ? '0-1년' : (stage === 'expand' ? '2-3년' : '4년 이후');

      return {
        stage: stageLabel,
        timeline: timeline,
        fee: totalFee,
        solutions: [
          monolog ? 'Monolog' : null,
          moai ? 'MoAI' : null,
          monolis ? 'Monolis' : null
        ].filter(Boolean).join(', ')
      };
    }

    function simulateAllStages() {
      const type = document.getElementById('companyType').value;
      const name = document.getElementById('companyName').value;
      const machines = parseInt(document.getElementById('machines').value) || 0;
      const users = parseInt(document.getElementById('users').value) || 0;

      let configs = [];
      if (type === 'production') {
        configs = [
          ['acquire', true, false, false],
          ['expand', true, true, false],
          ['standardize', true, true, true],
        ];
      } else if (type === 'sourcing') {
        configs = [
          ['acquire', false, false, true],
          ['expand', true, true, true],
          ['standardize', true, true, true],
        ];
      } else if (type === 'data') {
        configs = [
          ['acquire', false, true, false],
          ['expand', false, true, true],
          ['standardize', false, true, true],
        ];
      } else {
        alert("회사 구분을 선택하세요.");
        return;
      }

      let resultHtml = `<table>
        <tr><th>기업명</th><th>단계</th><th>타임라인</th><th>월 구독료 (USD)</th><th>비고</th></tr>`;

      configs.forEach(([stage, monolog, moai, monolis]) => {
        const result = calculate(stage, monolog, moai, monolis, machines, users);
        resultHtml += `<tr>
          <td>${name}</td>
          <td>${result.stage}</td>
          <td>${result.timeline}</td>
          <td>${result.fee > 0 ? `$${result.fee.toLocaleString()}` : '0'}</td>
          <td>${result.fee === 0 ? '일회성 비용 $15,000' : result.solutions}</td>
        </tr>`;
      });

      resultHtml += '</table>';
      document.getElementById('result').innerHTML = resultHtml;
    }
  </script>
</body>
</html>
